<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title></title>
                <meta name="robots" content="noindex" />
                

        <!-- Custom HTML head -->
        

        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

                <link rel="icon" href="favicon.svg">
                        <link rel="shortcut icon" href="favicon.png">
                <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
                <link rel="stylesheet" href="css/print.css" media="print">
        
        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
                <link rel="stylesheet" href="fonts/fonts.css">
        
        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        
            </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="index.html"><strong aria-hidden="true">1.</strong> Introduction</a></li><li class="chapter-item expanded "><a href="platforms/index.html"><strong aria-hidden="true">2.</strong> Platforms</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="platforms/web.html"><strong aria-hidden="true">2.1.</strong> Web</a></li><li class="chapter-item expanded "><a href="platforms/ssr.html"><strong aria-hidden="true">2.2.</strong> Server Side Rendering</a></li><li class="chapter-item expanded "><a href="platforms/desktop.html"><strong aria-hidden="true">2.3.</strong> Desktop</a></li><li class="chapter-item expanded "><a href="platforms/mobile.html"><strong aria-hidden="true">2.4.</strong> Mobile</a></li><li class="chapter-item expanded "><a href="platforms/tui.html"><strong aria-hidden="true">2.5.</strong> TUI</a></li></ol></li><li class="chapter-item expanded "><a href="guide/index.html"><strong aria-hidden="true">3.</strong> Advanced Guides</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="guide/rsx_in_depth.html"><strong aria-hidden="true">3.1.</strong> RSX in Depth</a></li><li class="chapter-item expanded "><a href="guide/components.html"><strong aria-hidden="true">3.2.</strong> Components</a></li><li class="chapter-item expanded "><a href="guide/props.html"><strong aria-hidden="true">3.3.</strong> Props</a></li><li class="chapter-item expanded "><a href="guide/memoization.html"><strong aria-hidden="true">3.4.</strong> Memoization</a></li><li class="chapter-item expanded "><a href="guide/performance.html"><strong aria-hidden="true">3.5.</strong> Performance</a></li><li class="chapter-item expanded "><a href="guide/testing.html"><strong aria-hidden="true">3.6.</strong> Testing</a></li><li class="chapter-item expanded "><a href="guide/rsx.html"><strong aria-hidden="true">3.7.</strong> Building Elements with NodeFactory</a></li><li class="chapter-item expanded "><a href="guide/custom_elements.html"><strong aria-hidden="true">3.8.</strong> Custom Elements</a></li><li class="chapter-item expanded "><a href="guide/custom_renderer.html"><strong aria-hidden="true">3.9.</strong> Custom Renderer</a></li><li class="chapter-item expanded "><a href="guide/server_side_components.html"><strong aria-hidden="true">3.10.</strong> Server-side components</a></li><li class="chapter-item expanded "><a href="guide/bundline.html"><strong aria-hidden="true">3.11.</strong> Bundling and Distributing</a></li></ol></li><li class="chapter-item expanded "><a href="reference/reference.html"><strong aria-hidden="true">4.</strong> Reference Guide</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="reference/anti.html"><strong aria-hidden="true">4.1.</strong> Anti-patterns</a></li><li class="chapter-item expanded "><a href="reference/children.html"><strong aria-hidden="true">4.2.</strong> Children</a></li><li class="chapter-item expanded "><a href="reference/conditional.html"><strong aria-hidden="true">4.3.</strong> Conditional Rendering</a></li><li class="chapter-item expanded "><a href="reference/controlled.html"><strong aria-hidden="true">4.4.</strong> Controlled Inputs</a></li><li class="chapter-item expanded "><a href="reference/custom.html"><strong aria-hidden="true">4.5.</strong> Custom Elements</a></li><li class="chapter-item expanded "><a href="reference/empty.html"><strong aria-hidden="true">4.6.</strong> Empty Components</a></li><li class="chapter-item expanded "><a href="reference/error.html"><strong aria-hidden="true">4.7.</strong> Error Handling</a></li><li class="chapter-item expanded "><a href="reference/fragments.html"><strong aria-hidden="true">4.8.</strong> Fragments</a></li><li class="chapter-item expanded "><a href="reference/global.html"><strong aria-hidden="true">4.9.</strong> Global CSS</a></li><li class="chapter-item expanded "><a href="reference/inline.html"><strong aria-hidden="true">4.10.</strong> Inline Styles</a></li><li class="chapter-item expanded "><a href="reference/iterators.html"><strong aria-hidden="true">4.11.</strong> Iterators</a></li><li class="chapter-item expanded "><a href="reference/listeners.html"><strong aria-hidden="true">4.12.</strong> Listeners</a></li><li class="chapter-item expanded "><a href="reference/memoization.html"><strong aria-hidden="true">4.13.</strong> Memoization</a></li><li class="chapter-item expanded "><a href="reference/node.html"><strong aria-hidden="true">4.14.</strong> Node Refs</a></li><li class="chapter-item expanded "><a href="reference/spread.html"><strong aria-hidden="true">4.15.</strong> Spread Pattern</a></li><li class="chapter-item expanded "><a href="reference/state.html"><strong aria-hidden="true">4.16.</strong> State Management</a></li><li class="chapter-item expanded "><a href="reference/suspense.html"><strong aria-hidden="true">4.17.</strong> Suspense</a></li><li class="chapter-item expanded "><a href="reference/task.html"><strong aria-hidden="true">4.18.</strong> task</a></li><li class="chapter-item expanded "><a href="reference/testing.html"><strong aria-hidden="true">4.19.</strong> Testing</a></li></ol></li></ol>            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                                                <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                                            </div>

                    <h1 class="menu-title"></h1>

                    <div class="right-buttons">
                                                <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                                                                        
                    </div>
                </div>

                                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                
                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="dioxus-reference-and-advanced-guides"><a class="header" href="#dioxus-reference-and-advanced-guides">Dioxus: Reference and Advanced Guides</a></h1>
<p><img src="./images/dioxuslogo_full.png" alt="dioxuslogo" /></p>
<p><strong>Dioxus</strong> is a framework and ecosystem for building fast, scalable, and robust user interfaces with the Rust programming language. This guide will help you get started with Dioxus running on the Web, Desktop, Mobile, and more.</p>
<blockquote>
<p>This book is the reference and Advanced Guides for the Dioxus framework. For a tutorial on how to actually <em>use</em> Dioxus, make sure to check out the <a href="https://dioxuslabs.com/guide/">official guide</a>.</p>
</blockquote>
<h2 id="reference-and-guides"><a class="header" href="#reference-and-guides">Reference and Guides</a></h2>
<p>With the reference, we aim to maintain documentation of functionality that might not be mentioned in the official guide to keep the information load to a minimum. Some topics not included by the guide but discussed in the reference include:</p>
<ul>
<li>ThreadSafety of the VirtualDom</li>
<li>Full usage of <code>rsx!</code> and included features</li>
<li>Spread pattern for component properties</li>
<li>Testing</li>
<li>Memoization in Depth</li>
<li>Custom Elements</li>
<li>Custom Renderers</li>
</ul>
<h2 id="contributing"><a class="header" href="#contributing">Contributing</a></h2>
<p>If this doc is lacking in any way, is confusing, has a typo, or you'd just like to help improve things, feel free to make a PR against the <a href="https://github.com/DioxusLabs/dioxus/tree/master/docs/reference">Dioxus repo</a>.</p>
<p>All contributions will be licensed under MIT/Apache2.</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="platforms"><a class="header" href="#platforms">Platforms</a></h1>
<p>Dioxus supports many different platforms. Below are a list of guides that walk you through setting up Dioxus for a specific platform.</p>
<h3 id="setup-guides"><a class="header" href="#setup-guides">Setup Guides</a></h3>
<ul>
<li><a href="platforms/web.html">Web</a></li>
<li><a href="platforms/ssr.html">Server Side Rendering</a></li>
<li><a href="platforms/desktop.html">Desktop</a></li>
<li><a href="platforms/mobile.html">Mobile</a></li>
<li><a href="platforms/tui.html">TUI</a></li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-started-web"><a class="header" href="#getting-started-web">Getting Started: Web</a></h1>
<p><a href="https://trunkrs.dev"><em>&quot;Pack your things, we're going on an adventure!&quot;</em></a></p>
<p>Dioxus is well supported for the web through WebAssembly. A build of Dioxus for the web will be roughly equivalent to the size of a React build (70kb vs 65kb), but will load significantly faster due to <a href="https://hacks.mozilla.org/2018/01/making-webassembly-even-faster-firefoxs-new-streaming-and-tiering-compiler/">WebAssembly's StreamingCompile</a> option.</p>
<p>Building Dioxus apps for the web requires much less configuration than our JavaScript counterparts.</p>
<h2 id="tooling"><a class="header" href="#tooling">Tooling</a></h2>
<p>To develop your Dioxus app for the web, you'll need a tool to build and serve your assets. We recommend using <a href="https://trunkrs.dev">trunk</a> which includes a build system, Wasm optimization, a dev server, and support for SASS/CSS.</p>
<p>Currently, trunk projects can only build the root binary (ie the <code>main.rs</code>). To build a new Dioxus compatible project, this should get you up and running.</p>
<p>First, <a href="https://trunkrs.dev/#install">install trunk</a>:</p>
<pre><code class="language-shell">$ cargo install trunk
</code></pre>
<p>Make sure the <code>wasm32-unknown-unknown</code> target is installed:</p>
<pre><code class="language-shell">$ rustup target add wasm32-unknown-unknown
</code></pre>
<p>Create a new project:</p>
<pre><code class="language-shell">$ cargo new --bin demo
$ cd demo
</code></pre>
<p>Add Dioxus with the <code>web</code> features:</p>
<pre><code>$ cargo add dioxus --features web
</code></pre>
<p>Add an <code>index.html</code> for Trunk to use. Make sure your &quot;mount point&quot; element has an ID of &quot;main&quot; (this can be configured later):</p>
<pre><code class="language-html">&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;utf-8&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&quot;main&quot;&gt; &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Edit your <code>main.rs</code>:</p>
<pre><pre class="playground"><code class="language-rust">// main.rs

use dioxus::prelude::*;

fn main() {
    dioxus::web::launch(app);
}

fn app(cx: Scope) -&gt; Element {
    cx.render(rsx!{
        div { &quot;hello, wasm!&quot; }
    })
}
</code></pre></pre>
<p>And to serve our app:</p>
<pre><code class="language-shell">trunk serve
</code></pre>
<p>To build our app and publish it to Github:</p>
<ul>
<li>Make sure Github Pages is set up for your repo</li>
<li>Build your app with <code>trunk build --release</code></li>
<li>Move your generated HTML/CSS/JS/Wasm from <code>dist</code> into the folder configured for Github Pages</li>
<li>Add and commit with git</li>
<li>Push to Github</li>
</ul>
<p>That's it!</p>
<h2 id="future-build-tool"><a class="header" href="#future-build-tool">Future Build Tool</a></h2>
<p>We are currently working on our own build tool called <a href="http://github.com/dioxusLabs/studio">Dioxus Studio</a> which will support:</p>
<ul>
<li>an interactive TUI</li>
<li>on-the-fly reconfiguration</li>
<li>hot CSS reloading</li>
<li>two-way data binding between browser and source code</li>
<li>an interpreter for <code>rsx!</code> </li>
<li>ability to publish to github/netlify/vercel</li>
<li>bundling for iOS/Desktop/etc</li>
</ul>
<h2 id="features"><a class="header" href="#features">Features</a></h2>
<p>Currently, the web supports:</p>
<ul>
<li>Pre-rendering/Hydration</li>
</ul>
<h2 id="events"><a class="header" href="#events">Events</a></h2>
<p>The regular events in the <code>html</code> crate work just fine in the web.</p>
<h2 id="future-steps"><a class="header" href="#future-steps">Future Steps</a></h2>
<p>Make sure to read the <a href="https://dioxuslabs.com/guide">Dioxus Guide</a> if you already haven't!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-started-server-side-rendering"><a class="header" href="#getting-started-server-side-rendering">Getting Started: Server-Side-Rendering</a></h1>
<p>The Dioxus VirtualDom can be rendered to a string by traversing the Element Tree. This is implemented in the <code>ssr</code> crate where your Dioxus app can be directly rendered to HTML to be served by a web server.</p>
<h2 id="setup"><a class="header" href="#setup">Setup</a></h2>
<p>If you just want to render <code>rsx!</code> or a VirtualDom to HTML, check out the API docs. It's pretty simple:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// We can render VirtualDoms
let mut vdom = VirtualDom::new(app);
let _ = vdom.rebuild();
println!(&quot;{}&quot;, dioxus::ssr::render_vdom(&amp;vdom));

// Or we can render rsx! calls directly
println!( &quot;{}&quot;, dioxus::ssr::render_lazy(rsx! { h1 { &quot;Hello, world!&quot; } } );
<span class="boring">}
</span></code></pre></pre>
<p>However, for this guide, we're going to show how to use Dioxus SSR with <code>Axum</code>.</p>
<p>Make sure you have Rust and Cargo installed, and then create a new project:</p>
<pre><code class="language-shell">$ cargo new --bin demo
$ cd app
</code></pre>
<p>Add Dioxus with the <code>ssr</code> feature:</p>
<pre><code class="language-shell">$ cargo add dioxus --features ssr
</code></pre>
<p>Next, add all the Axum dependencies. This will be different if you're using a different Web Framework</p>
<pre><code>$ cargo add tokio --features full
$ cargo add axum
</code></pre>
<p>Your dependencies should look roughly like this:</p>
<pre><code class="language-toml">[dependencies]
axum = &quot;0.4.5&quot;
dioxus = { version = &quot;*&quot;, features = [&quot;ssr&quot;] }
tokio = { version = &quot;1.15.0&quot;, features = [&quot;full&quot;] }
</code></pre>
<p>Now, setup your Axum app to respond on an endpoint.</p>
<pre><pre class="playground"><code class="language-rust">use axum::{response::Html, routing::get, Router};
use dioxus::prelude::*;

#[tokio::main]
async fn main() {
    let addr = std::net::SocketAddr::from(([127, 0, 0, 1], 3000));
    println!(&quot;listening on http://{}&quot;, addr);

    axum::Server::bind(&amp;addr)
        .serve(
            Router::new()
                .route(&quot;/&quot;, get(app_endpoint))
                .into_make_service(),
        )
        .await
        .unwrap();
}
</code></pre></pre>
<p>And then add our endpoint. We can either render <code>rsx!</code> directly:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>async fn app_endpoint() -&gt; Html&lt;String&gt; {
    Html(dioxus::ssr::render_lazy(rsx! {
            h1 { &quot;hello world!&quot; }
    }))
}
<span class="boring">}
</span></code></pre></pre>
<p>Or we can render VirtualDoms.</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>async fn app_endpoint() -&gt; Html&lt;String&gt; {
    fn app(cx: Scope) -&gt; Element {
        cx.render(rsx!(h1 { &quot;hello world&quot; }))
    }
    let mut app = VirtualDom::new(app);
    let _ = app.rebuild();

    Html(dioxus::ssr::render_vdom(&amp;app))
}
<span class="boring">}
</span></code></pre></pre>
<p>And that's it!</p>
<blockquote>
<p>You might notice that you cannot hold the VirtualDom across an await point. Dioxus is currently not ThreadSafe, so it <em>must</em> remain on the thread it started. We are working on loosening this requirement.</p>
</blockquote>
<h2 id="future-steps-1"><a class="header" href="#future-steps-1">Future Steps</a></h2>
<p>Make sure to read the <a href="https://dioxuslabs.com/guide">Dioxus Guide</a> if you already haven't!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-started-desktop"><a class="header" href="#getting-started-desktop">Getting Started: Desktop</a></h1>
<p>One of Dioxus' killer features is the ability to quickly build a native desktop app that looks and feels the same across platforms. Apps built with Dioxus are typically &lt;5mb in size and use existing system resources, so they won't hog extreme amounts of RAM or memory.</p>
<p>Dioxus Desktop is built off Tauri. Right now there aren't any Dioxus abstractions over keyboard shortcuts, menubar, handling, etc, so you'll want to leverage Tauri - mostly <a href="http://github.com/tauri-apps/wry/">Wry</a> and <a href="http://github.com/tauri-apps/tao">Tao</a>) directly. The next major release of Dioxus-Desktop will include components and hooks for notifications, global shortcuts, menubar, etc.</p>
<h2 id="getting-set-up"><a class="header" href="#getting-set-up">Getting Set up</a></h2>
<p>Getting Set up with Dioxus-Desktop is quite easy. Make sure you have Rust and Cargo installed, and then create a new project:</p>
<pre><code class="language-shell">$ cargo new --bin demo
$ cd app
</code></pre>
<p>Add Dioxus with the <code>desktop</code> feature:</p>
<pre><code class="language-shell">$ cargo add dioxus --features desktop
</code></pre>
<p>Edit your <code>main.rs</code>:</p>
<pre><pre class="playground"><code class="language-rust">// main.rs
use dioxus::prelude::*;

fn main() {
    dioxus::desktop::launch(app);
}

fn app(cx: Scope) -&gt; Element {
    cx.render(rsx!{
        div {
            &quot;hello world!&quot;
        }
    })
}
</code></pre></pre>
<p>To configure the webview, menubar, and other important desktop-specific features, checkout out some of the launch configuration in the <a href="https://docs.rs/dioxus-desktop/">API reference</a>.</p>
<h2 id="future-steps-2"><a class="header" href="#future-steps-2">Future Steps</a></h2>
<p>Make sure to read the <a href="https://dioxuslabs.com/guide">Dioxus Guide</a> if you already haven't!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-started-mobile"><a class="header" href="#getting-started-mobile">Getting started: mobile</a></h1>
<p>Dioxus is unique in that it actually supports mobile. However, support is very young and you might need to dip down into some of the primitives until better supported is ready.</p>
<p>Currently, only iOS is supported through us, however you <em>can</em> add android support by following the same instructions below, but using the <code>android</code> guide in <code>cargo-mobile</code>.</p>
<p>Also, Dioxus Desktop and Dioxus Mobile share the same codebase, and dioxus-mobile currently just re-exports dioxus-desktop.</p>
<h2 id="getting-set-up-1"><a class="header" href="#getting-set-up-1">Getting Set up</a></h2>
<p>Getting set up with mobile can but quite challenging. The tooling here isn't great (yet) and might take some hacking around to get things working. macOS M1 is broadly unexplored and might not work for you.</p>
<p>We're going to be using <code>cargo-mobile</code> to build for mobile. First, install it:</p>
<pre><code class="language-shell">$ cargo install --git https://github.com/BrainiumLLC/cargo-mobile
</code></pre>
<p>And then initialize your app for the right platform. Use the <code>winit</code> template for now. Right now, there's no &quot;Dioxus&quot; template in cargo-mobile.</p>
<pre><code class="language-shell">$ cargo mobile init 
</code></pre>
<p>We're going to completely clear out the <code>dependencies</code> it generates for us, swapping out <code>winit</code> with <code>dioxus-mobile</code>.</p>
<pre><code class="language-toml">
[package]
name = &quot;dioxus-ios-demo&quot;
version = &quot;0.1.0&quot;
authors = [&quot;Jonathan Kelley &lt;jkelleyrtp@gmail.com&gt;&quot;]
edition = &quot;2018&quot;


# leave the `lib` declaration
[lib]
crate-type = [&quot;staticlib&quot;, &quot;cdylib&quot;, &quot;rlib&quot;]


# leave the binary it generates for us
[[bin]]
name = &quot;dioxus-ios-demo-desktop&quot;
path = &quot;gen/bin/desktop.rs&quot;

# clear all the dependencies
[dependencies]
mobile-entry-point = &quot;0.1.0&quot;
dioxus = { version = &quot;*&quot;, features = [&quot;mobile&quot;] }
simple_logger = &quot;*&quot;
</code></pre>
<p>Edit your <code>lib.rs</code>:</p>
<pre><pre class="playground"><code class="language-rust">// main.rs
use dioxus::prelude::*;

fn main() {
    dioxus::mobile::launch(app);
}

fn app(cx: Scope) -&gt; Element {
    cx.render(rsx!{
        div {
            &quot;hello world!&quot;
        }
    })
}
</code></pre></pre>
<p>To configure the webview, menubar, and other important desktop-specific features, checkout out some of the launch configuration in the <a href="https://docs.rs/dioxus-mobile/">API reference</a>.</p>
<h2 id="future-steps-3"><a class="header" href="#future-steps-3">Future Steps</a></h2>
<p>Make sure to read the <a href="https://dioxuslabs.com/guide">Dioxus Guide</a> if you already haven't!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="getting-started-tui"><a class="header" href="#getting-started-tui">Getting Started: TUI</a></h1>
<p>TUI support is currently quite experimental. Even the project name will change. But, if you're willing to venture into the realm of the unknown, this guide will get you started.</p>
<p><a href="https://github.com/DioxusLabs/rink/raw/master/examples/example.png">TUI Support</a></p>
<h2 id="getting-set-up-2"><a class="header" href="#getting-set-up-2">Getting Set up</a></h2>
<p>To tinker with TUI support, start by making a new package and adding our TUI package from git.</p>
<pre><code class="language-shell">$ cargo new --bin demo
$ cd demo
$ cargo add dioxus
$ cargo add rink --git https://github.com/DioxusLabs/rink.git
</code></pre>
<p>Then, edit your <code>main.rs</code> with the basic template. </p>
<pre><pre class="playground"><code class="language-rust">//  main
use dioxus::prelude::*;

fn main() {
    let mut dom = VirtualDom::new(app);
    dom.rebuild();

    rink::render_vdom(&amp;mut dom).unwrap();
}

fn app(cx: Scope) -&gt; Element {
    cx.render(rsx! {
        div {
            width: &quot;100%&quot;,
            height: &quot;10px&quot;,
            background_color: &quot;red&quot;,
            justify_content: &quot;center&quot;,
            align_items: &quot;center&quot;,

            &quot;Hello world!&quot;
        }
    })
}
</code></pre></pre>
<p>To run our app:</p>
<pre><code class="language-shell">$ cargo run
</code></pre>
<p>Press &quot;q&quot; to close the app (yes, this is hardcoded, we are working on handlers to expose this in your code.)</p>
<h2 id="notes"><a class="header" href="#notes">Notes</a></h2>
<ul>
<li>Our TUI package uses flexbox for layout</li>
<li>1px is one character lineheight. Your regular CSS px does not translate.</li>
<li>If your app panics, your terminal is wrecked. This will be fixed eventually.</li>
</ul>
<h2 id="future-steps-4"><a class="header" href="#future-steps-4">Future Steps</a></h2>
<p>Make sure to read the <a href="https://dioxuslabs.com/guide">Dioxus Guide</a> if you already haven't!</p>
<div style="break-before: page; page-break-before: always;"></div><h1 id="advanced-guides"><a class="header" href="#advanced-guides">Advanced Guides</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="rsx-in-depth"><a class="header" href="#rsx-in-depth">RSX in Depth</a></h1>
<p>The RSX macro makes it very easy to assemble complex UIs with a very natural Rust syntax:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>rsx!(
    div {
        button {
            onclick: move |e| todos.write().new_todo(),
            &quot;Add todo&quot;
        }
        ul {
            class: &quot;todo-list&quot;,
            todos.iter().map(|(key, todo)| rsx!(
                li { 
                    class: &quot;beautiful-todo&quot;
                    key: &quot;f&quot;
                    h3 { &quot;{todo.title}&quot; }
                    p { &quot;{todo.contents}&quot;}
                }
            ))
        }
    }
)
<span class="boring">}
</span></code></pre></pre>
<p>In this section, we'll cover the <code>rsx!</code> macro in depth. If you prefer to learn through examples, the  <code>code reference</code> guide has plenty of examples on how to use <code>rsx!</code> effectively.</p>
<h3 id="element-structure"><a class="header" href="#element-structure">Element structure</a></h3>
<p>Attributes must come before  child elements</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>div {
    hidden: &quot;false&quot;,
    &quot;some text&quot;
    child {}
    Component {} // uppercase
    component() // lowercase is treated like a function call
    (0..10).map(|f| rsx!{ &quot;hi {f}&quot; }) // arbitrary rust expressions
}
<span class="boring">}
</span></code></pre></pre>
<p>Each element takes a comma-separated list of expressions to build the node. Roughly, here's how they work:</p>
<ul>
<li><code>name: value</code> sets a property on this element.</li>
<li><code>&quot;text&quot;</code> adds a new text element</li>
<li><code>tag {}</code> adds a new child element</li>
<li><code>CustomTag {}</code> adds a new child component</li>
<li><code>{expr}</code> pastes the <code>expr</code> tokens literally. They must be <code>IntoIterator&lt;T&gt; where T: IntoVnode</code> to work properly</li>
</ul>
<p>Commas are entirely optional, but might be useful to delineate between elements and attributes.</p>
<p>The <code>render</code> function provides an <strong>extremely efficient</strong> allocator for VNodes and text, so try not to use the <code>format!</code> macro in your components. Rust's default <code>ToString</code> methods pass through the global allocator, but all text in components is allocated inside a manually-managed Bump arena. To push you in the right direction, all text-based attributes take <code>std::fmt::Arguments</code> directly, so you'll want to reach for <code>format_args!</code> when the built-in <code>f-string</code> interpolation just doesn't cut it.</p>
<h3 id="ignoring-cxrender-with-rsxcx-"><a class="header" href="#ignoring-cxrender-with-rsxcx-">Ignoring <code>cx.render</code> with <code>rsx!(cx, ...)</code></a></h3>
<p>Sometimes, writing <code>cx.render</code> is a hassle. The `rsx! macro will accept any token followed by a comma as the target to call &quot;render&quot; on:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>cx.render(rsx!( div {} ))
// becomes
rsx!(cx, div {})
<span class="boring">}
</span></code></pre></pre>
<h3 id="conditional-rendering"><a class="header" href="#conditional-rendering">Conditional Rendering</a></h3>
<p>Sometimes, you might not want to render an element given a condition. The rsx! macro will accept any tokens directly contained with curly braces, provided they resolve to a type that implements <code>IntoIterator&lt;VNode&gt;</code>. This lets us write any Rust expression that resolves to a VNode:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>rsx!({
    if enabled {
        rsx!(cx, div {&quot;enabled&quot;})
    } else {
        rsx!(cx, li {&quot;disabled&quot;})
    }
})
<span class="boring">}
</span></code></pre></pre>
<p>A convenient way of hiding/showing an element is returning an <code>Option&lt;VNode&gt;</code>. When combined with <code>and_then</code>, we can succinctly control the display state given some boolean:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>rsx!({
    a.and_then(rsx!(div {&quot;enabled&quot;}))
})
<span class="boring">}
</span></code></pre></pre>
<p>It's important to note that the expression <code>rsx!()</code> is typically lazy - this expression must be <em>rendered</em> to produce a VNode. When using match statements, we must render every arm as to avoid the <code>no two closures are identical</code> rule that Rust imposes:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>// this will not compile!
match case {
    true =&gt; rsx!(div {}),
    false =&gt; rsx!(div {})
}

// the nodes must be rendered first
match case {
    true =&gt; rsx!(cx, div {}),
    false =&gt; rsx!(cx, div {})
}
<span class="boring">}
</span></code></pre></pre>
<h3 id="lists"><a class="header" href="#lists">Lists</a></h3>
<p>Again, because anything that implements <code>IntoIterator&lt;VNode&gt;</code> is valid, we can use lists directly in our <code>rsx!</code>:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let items = vec![&quot;a&quot;, &quot;b&quot;, &quot;c&quot;];

cx.render(rsx!{
    ul {
        {items.iter().map(|f| rsx!(li { &quot;a&quot; }))}
    }
})
<span class="boring">}
</span></code></pre></pre>
<p>Sometimes, it makes sense to render VNodes into a list:</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let mut items = vec![];

for _ in 0..5 {
    items.push(rsx!(cx, li {} ))
}

rsx!(cx, {items} )
<span class="boring">}
</span></code></pre></pre>
<h4 id="lists-and-keys"><a class="header" href="#lists-and-keys">Lists and Keys</a></h4>
<p>When rendering the VirtualDom to the screen, Dioxus needs to know which elements have been added and which have been removed. These changes are determined through a process called &quot;diffing&quot; - an old set of elements is compared to a new set of elements. If an element is removed, then it won't show up in the new elements, and Dioxus knows to remove it.</p>
<p>However, with lists, Dioxus does not exactly know how to determine which elements have been added or removed if the order changes or if an element is added or removed from the middle of the list.</p>
<p>In these cases, it is vitally important to specify a &quot;key&quot; alongside the element. Keys should be persistent between renders.</p>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn render_list(cx: Scope, items: HashMap&lt;String, Todo&gt;) -&gt; DomTree {
    rsx!(cx, ul {
        {items.iter().map(|key, item| {
            li {
                key: key,
                h2 { &quot;{todo.title}&quot; }
                p { &quot;{todo.contents}&quot; }
            }
        })}
    })
}
<span class="boring">}
</span></code></pre></pre>
<p>There have been many guides made for keys in React, so we recommend reading up to understand their importance:</p>
<ul>
<li><a href="https://reactjs.org/docs/lists-and-keys.html">React guide on keys</a></li>
<li><a href="https://kentcdodds.com/blog/understanding-reacts-key-prop">Importance of keys (Medium)</a></li>
</ul>
<h3 id="complete-reference"><a class="header" href="#complete-reference">Complete Reference</a></h3>
<pre><pre class="playground"><code class="language-rust">
<span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>let text = &quot;example&quot;;

cx.render(rsx!{
    div {
        h1 { &quot;Example&quot; },

        {title}

        // fstring interpolation
        &quot;{text}&quot;

        p {
            // Attributes
            tag: &quot;type&quot;,

            // Anything that implements display can be an attribute
            abc: 123,
            
            enabled: true,

            // attributes also supports interpolation
            // `class` is not a restricted keyword unlike JS and ClassName
            class: &quot;big small wide short {text}&quot;,

            class: format_args!(&quot;attributes take fmt::Arguments. {}&quot;, 99),

            tag: {&quot;these tokens are placed directly&quot;}

            // Children
            a { &quot;abcder&quot; },

            // Children with attributes
            h2 { &quot;hello&quot;, class: &quot;abc-123&quot; },

            // Child components
            CustomComponent { a: 123, b: 456, key: &quot;1&quot; },

            // Child components with paths
            crate::components::CustomComponent { a: 123, b: 456, key: &quot;1&quot; },

            // Iterators
            { (0..3).map(|i| rsx!( h1 {&quot;{:i}&quot;} )) },

            // More rsx!, or even html!
            { rsx! { div { } } },
            { html! { &lt;div&gt; &lt;/div&gt; } },

            // Matching
            // Requires rendering the nodes first.
            // rsx! is lazy, and the underlying closures cannot have the same type
            // Rendering produces the VNode type
            {match rand::gen_range::&lt;i32&gt;(1..3) {
                1 =&gt; rsx!(cx, h1 { &quot;big&quot; })
                2 =&gt; rsx!(cx, h2 { &quot;medium&quot; })
                _ =&gt; rsx!(cx, h3 { &quot;small&quot; })
            }}

            // Optionals
            {true.and_then(|f| rsx!( h1 {&quot;Conditional Rendering&quot;} ))}

            // Child nodes
            {cx.props.children}

            // Any expression that is `IntoVNode`
            {expr}
        }
    }
})
<span class="boring">}
</span></code></pre></pre>
<div style="break-before: page; page-break-before: always;"></div><h1 id="components"><a class="header" href="#components">Components</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="props"><a class="header" href="#props">Props</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="memoization"><a class="header" href="#memoization">Memoization</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="performance"><a class="header" href="#performance">Performance</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="testing"><a class="header" href="#testing">Testing</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="building-elements-with-nodefactory"><a class="header" href="#building-elements-with-nodefactory">Building Elements with NodeFactory</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="custom-elements"><a class="header" href="#custom-elements">Custom Elements</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="custom-renderer"><a class="header" href="#custom-renderer">Custom Renderer</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="server-side-components"><a class="header" href="#server-side-components">Server-side components</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="bundling-and-distributing"><a class="header" href="#bundling-and-distributing">Bundling and Distributing</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="reference-guide"><a class="header" href="#reference-guide">Reference Guide</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="anti-patterns"><a class="header" href="#anti-patterns">Anti-patterns</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="children"><a class="header" href="#children">Children</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="conditional-rendering-1"><a class="header" href="#conditional-rendering-1">Conditional Rendering</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="controlled-inputs"><a class="header" href="#controlled-inputs">Controlled Inputs</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="custom-elements-1"><a class="header" href="#custom-elements-1">Custom Elements</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="empty-components"><a class="header" href="#empty-components">Empty Components</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="error-handling"><a class="header" href="#error-handling">Error Handling</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="fragments"><a class="header" href="#fragments">Fragments</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="global-css"><a class="header" href="#global-css">Global CSS</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="inline-styles"><a class="header" href="#inline-styles">Inline Styles</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="iterators"><a class="header" href="#iterators">Iterators</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="listeners"><a class="header" href="#listeners">Listeners</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="memoization-1"><a class="header" href="#memoization-1">Memoization</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="node-refs"><a class="header" href="#node-refs">Node Refs</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="spread-pattern"><a class="header" href="#spread-pattern">Spread Pattern</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="state-management"><a class="header" href="#state-management">State Management</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="suspense"><a class="header" href="#suspense">Suspense</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="task"><a class="header" href="#task">task</a></h1>
<div style="break-before: page; page-break-before: always;"></div><h1 id="testing-1"><a class="header" href="#testing-1">Testing</a></h1>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        
                        
                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                
                            </nav>

        </div>

        
        
        
                <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        
        
                <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        
        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        
                        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
                
    </body>
</html>
